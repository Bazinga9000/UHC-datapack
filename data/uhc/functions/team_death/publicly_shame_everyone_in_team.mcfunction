data modify storage uhc deathmsg set value [{"text":" have all been eliminated!","color":"white"}]
# pop first of uhc dead_teams and read
execute store result score current_dt uhc.internal run data get storage uhc dead_teams[0]
data remove storage uhc dead_teams[0]

execute if score current_dt uhc.internal matches 1 run data modify storage uhc deathmsg prepend from storage uhc team_names[1]
execute if score current_dt uhc.internal matches 2 run data modify storage uhc deathmsg prepend from storage uhc team_names[2]
execute if score current_dt uhc.internal matches 3 run data modify storage uhc deathmsg prepend from storage uhc team_names[3]
execute if score current_dt uhc.internal matches 4 run data modify storage uhc deathmsg prepend from storage uhc team_names[4]
execute if score current_dt uhc.internal matches 5 run data modify storage uhc deathmsg prepend from storage uhc team_names[5]
execute if score current_dt uhc.internal matches 6 run data modify storage uhc deathmsg prepend from storage uhc team_names[6]
execute if score current_dt uhc.internal matches 7 run data modify storage uhc deathmsg prepend from storage uhc team_names[7]
execute if score current_dt uhc.internal matches 8 run data modify storage uhc deathmsg prepend from storage uhc team_names[8]
execute if score current_dt uhc.internal matches 9 run data modify storage uhc deathmsg prepend from storage uhc team_names[9]
execute if score current_dt uhc.internal matches 10 run data modify storage uhc deathmsg prepend from storage uhc team_names[10]
execute if score current_dt uhc.internal matches 11 run data modify storage uhc deathmsg prepend from storage uhc team_names[11]
execute if score current_dt uhc.internal matches 12 run data modify storage uhc deathmsg prepend from storage uhc team_names[12]
execute if score current_dt uhc.internal matches 13 run data modify storage uhc deathmsg prepend from storage uhc team_names[13]
execute if score current_dt uhc.internal matches 14 run data modify storage uhc deathmsg prepend from storage uhc team_names[14]
execute if score current_dt uhc.internal matches 15 run data modify storage uhc deathmsg prepend from storage uhc team_names[15]
execute if score current_dt uhc.internal matches 16 run data modify storage uhc deathmsg prepend from storage uhc team_names[16]
execute if score current_dt uhc.internal matches 17 run data modify storage uhc deathmsg prepend from storage uhc team_names[17]
execute if score current_dt uhc.internal matches 18 run data modify storage uhc deathmsg prepend from storage uhc team_names[18]
execute if score current_dt uhc.internal matches 19 run data modify storage uhc deathmsg prepend from storage uhc team_names[19]
execute if score current_dt uhc.internal matches 20 run data modify storage uhc deathmsg prepend from storage uhc team_names[20]
execute if score current_dt uhc.internal matches 21 run data modify storage uhc deathmsg prepend from storage uhc team_names[21]
execute if score current_dt uhc.internal matches 22 run data modify storage uhc deathmsg prepend from storage uhc team_names[22]
execute if score current_dt uhc.internal matches 23 run data modify storage uhc deathmsg prepend from storage uhc team_names[23]
execute if score current_dt uhc.internal matches 24 run data modify storage uhc deathmsg prepend from storage uhc team_names[24]
execute if score current_dt uhc.internal matches 25 run data modify storage uhc deathmsg prepend from storage uhc team_names[25]
execute if score current_dt uhc.internal matches 26 run data modify storage uhc deathmsg prepend from storage uhc team_names[26]
execute if score current_dt uhc.internal matches 27 run data modify storage uhc deathmsg prepend from storage uhc team_names[27]
execute if score current_dt uhc.internal matches 28 run data modify storage uhc deathmsg prepend from storage uhc team_names[28]
execute if score current_dt uhc.internal matches 29 run data modify storage uhc deathmsg prepend from storage uhc team_names[29]
execute if score current_dt uhc.internal matches 30 run data modify storage uhc deathmsg prepend from storage uhc team_names[30]
execute if score current_dt uhc.internal matches 31 run data modify storage uhc deathmsg prepend from storage uhc team_names[31]
execute if score current_dt uhc.internal matches 32 run data modify storage uhc deathmsg prepend from storage uhc team_names[32]
execute if score current_dt uhc.internal matches 33 run data modify storage uhc deathmsg prepend from storage uhc team_names[33]
execute if score current_dt uhc.internal matches 34 run data modify storage uhc deathmsg prepend from storage uhc team_names[34]
execute if score current_dt uhc.internal matches 35 run data modify storage uhc deathmsg prepend from storage uhc team_names[35]
execute if score current_dt uhc.internal matches 36 run data modify storage uhc deathmsg prepend from storage uhc team_names[36]
execute if score current_dt uhc.internal matches 37 run data modify storage uhc deathmsg prepend from storage uhc team_names[37]
execute if score current_dt uhc.internal matches 38 run data modify storage uhc deathmsg prepend from storage uhc team_names[38]
execute if score current_dt uhc.internal matches 39 run data modify storage uhc deathmsg prepend from storage uhc team_names[39]
execute if score current_dt uhc.internal matches 40 run data modify storage uhc deathmsg prepend from storage uhc team_names[40]
execute if score current_dt uhc.internal matches 41 run data modify storage uhc deathmsg prepend from storage uhc team_names[41]
execute if score current_dt uhc.internal matches 42 run data modify storage uhc deathmsg prepend from storage uhc team_names[42]
execute if score current_dt uhc.internal matches 43 run data modify storage uhc deathmsg prepend from storage uhc team_names[43]
execute if score current_dt uhc.internal matches 44 run data modify storage uhc deathmsg prepend from storage uhc team_names[44]
execute if score current_dt uhc.internal matches 45 run data modify storage uhc deathmsg prepend from storage uhc team_names[45]
execute if score current_dt uhc.internal matches 46 run data modify storage uhc deathmsg prepend from storage uhc team_names[46]
execute if score current_dt uhc.internal matches 47 run data modify storage uhc deathmsg prepend from storage uhc team_names[47]
execute if score current_dt uhc.internal matches 48 run data modify storage uhc deathmsg prepend from storage uhc team_names[48]
execute if score current_dt uhc.internal matches 49 run data modify storage uhc deathmsg prepend from storage uhc team_names[49]
execute if score current_dt uhc.internal matches 50 run data modify storage uhc deathmsg prepend from storage uhc team_names[50]
execute if score current_dt uhc.internal matches 51 run data modify storage uhc deathmsg prepend from storage uhc team_names[51]
execute if score current_dt uhc.internal matches 52 run data modify storage uhc deathmsg prepend from storage uhc team_names[52]
execute if score current_dt uhc.internal matches 53 run data modify storage uhc deathmsg prepend from storage uhc team_names[53]
execute if score current_dt uhc.internal matches 54 run data modify storage uhc deathmsg prepend from storage uhc team_names[54]
execute if score current_dt uhc.internal matches 55 run data modify storage uhc deathmsg prepend from storage uhc team_names[55]
execute if score current_dt uhc.internal matches 56 run data modify storage uhc deathmsg prepend from storage uhc team_names[56]
execute if score current_dt uhc.internal matches 57 run data modify storage uhc deathmsg prepend from storage uhc team_names[57]
execute if score current_dt uhc.internal matches 58 run data modify storage uhc deathmsg prepend from storage uhc team_names[58]
execute if score current_dt uhc.internal matches 59 run data modify storage uhc deathmsg prepend from storage uhc team_names[59]
execute if score current_dt uhc.internal matches 60 run data modify storage uhc deathmsg prepend from storage uhc team_names[60]
execute if score current_dt uhc.internal matches 61 run data modify storage uhc deathmsg prepend from storage uhc team_names[61]
execute if score current_dt uhc.internal matches 62 run data modify storage uhc deathmsg prepend from storage uhc team_names[62]
execute if score current_dt uhc.internal matches 63 run data modify storage uhc deathmsg prepend from storage uhc team_names[63]
execute if score current_dt uhc.internal matches 64 run data modify storage uhc deathmsg prepend from storage uhc team_names[64]

tellraw @a [{"nbt":"deathmsg[0]","storage":"uhc","interpret":"true"},{"nbt":"deathmsg[1]","storage":"uhc","interpret":"true"}]
# check if list is empty
data modify storage uhc empty_check set value []
execute store success score no_dts uhc.internal run data modify storage uhc empty_check set from storage uhc dead_teams
execute unless data storage uhc dead_teams run scoreboard players set no_dts 1
execute if score no_dts uhc.internal matches 0 run function uhc:team_death/publicly_shame_everyone_in_team